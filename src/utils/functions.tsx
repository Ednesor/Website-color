//TODO: pasar las funciones y refactorizar codigo